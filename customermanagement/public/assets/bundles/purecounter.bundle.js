function setOptions(e,t={}){var r,n,i={};for(r in e)t!={}&&!t.hasOwnProperty(r)||(n=parseValue(e[r]),i[r]=n,r.match(/duration|pulse/)&&(i[r]="boolean"!=typeof n?1e3*n:n));return Object.assign({},t,i)}function startCounter(t,r){var n=(r.end-r.start)/(r.duration/r.delay),i="inc",o=(r.start>r.end&&(i="dec",n*=-1),parseValue(r.start)),a=(t.innerHTML=formatNumber(o,r),!0===r.once&&t.setAttribute("data-purecounter-duration",0),setInterval(()=>{var e=nextNumber(o,n,i);t.innerHTML=formatNumber(e,r),((o=e)>=r.end&&"inc"==i||o<=r.end&&"dec"==i)&&(t.innerHTML=formatNumber(r.end,r),!r.once&&r.pulse&&(t.setAttribute("data-purecounter-duration",0),setTimeout(()=>{t.setAttribute("data-purecounter-duration",r.duration/1e3)},r.pulse)),clearInterval(a))},r.delay))}function nextNumber(e,t,r="inc"){return e=parseValue(e),t=parseValue(t),parseFloat("inc"===r?e+t:e-t)}function convertNumber(e,t){if(t.filesizing||t.currency){e=Math.abs(Number(e));var r=1e3,n=t.currency&&"string"==typeof t.currency?t.currency:"",i=t.decimals||1,o=["","K","M","B","T"],a="";t.filesizing&&(r=1024,o=["bytes","KB","MB","GB","TB"]);for(var s=4;0<=s;s--)if(0===s&&(a=e.toFixed(i)+" "+o[s]),e>=getFilesizeThreshold(r,s)){a=(e/getFilesizeThreshold(r,s)).toFixed(i)+" "+o[s];break}return n+a}return parseFloat(e)}function getFilesizeThreshold(e,t){return Math.pow(e,t)}function applySeparator(e,t){if(!t.separator)return e.replace(new RegExp(/,/gi,"gi"),"");t="string"==typeof t.separator?t.separator:",";return e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,").replace(new RegExp(/,/gi,"gi"),t)}function formatNumber(e,t){var r={minimumFractionDigits:t.decimals,maximumFractionDigits:t.decimals};return applySeparator((e=convertNumber(e,t)).toLocaleString(void 0,r),t)}function parseValue(e){return/^[0-9]+\.[0-9]+$/.test(e)?parseFloat(e):/^[0-9]+$/.test(e)?parseInt(e):/^true|false/i.test(e)?/^true/i.test(e):e}function elementIsInView(e){for(var t=e.offsetTop,r=e.offsetLeft,n=e.offsetWidth,i=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,r+=e.offsetLeft;return t>=window.pageYOffset&&r>=window.pageXOffset&&t+i<=window.pageYOffset+window.innerHeight&&r+n<=window.pageXOffset+window.innerWidth}function intersectionListenerSupported(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype}function PureCounter(e={}){var n=setOptions(e,{start:0,end:100,duration:2e3,delay:10,once:!0,pulse:!1,decimals:0,legacy:!0,filesizing:!1,currency:!1,separator:!1,selector:".purecounter"});function i(e){e.forEach(e=>{!0===a(e).legacy&&elementIsInView(e)&&o([e])})}function o(e,n){e.forEach(e=>{var t=e.target||e,r=a(t);return r.duration<=0?t.innerHTML=formatNumber(r.end,r):!n&&!elementIsInView(e)||n&&e.intersectionRatio<.5?(e=r.start>r.end?r.end:r.start,t.innerHTML=formatNumber(e,r)):void setTimeout(()=>startCounter(t,r),r.delay)})}function a(e){var t=n,e=[].filter.call(e.attributes,function(e){return/^data-purecounter-/.test(e.name)});return setOptions(0!=e.length?Object.assign({},...e.map(({name:e,value:t})=>{return{[e.replace("data-purecounter-","").toLowerCase()]:parseValue(t)}})):{},t)}!function(){var t,r=document.querySelectorAll(n.selector);0!==r.length&&(intersectionListenerSupported()?(t=new IntersectionObserver(o.bind(this),{root:null,rootMargin:"20px",threshold:.5}),r.forEach(e=>{t.observe(e)})):window.addEventListener&&(i(r),window.addEventListener("scroll",function(e){i(r)},{passive:!0})))}()}module.exports=PureCounter;