!function(v){"use strict";v.event.special.destroyed||(v.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}),v.fn.extend({maxlength:function(h,e){var t=v("body");function d(e){e=e.charCodeAt();return e?e<128?1:e<2048?2:3:0}function f(e){return e.split("").map(d).concat(0).reduce(function(e,t){return e+t})}function r(e){var t=e.val(),t=h.twoCharLinebreak?t.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):t.replace(/(?:\r\n|\r|\n)/g,"\n"),a=0,a=h.utf8?f(t):t.length;return"file"===e.prop("type")&&""!==e.val()&&(a-=12),a}function u(e,t){return t-r(e)}function l(e,t){t.css({display:"block"}),e.trigger("maxlength.shown")}function m(e,t,a){var s="";return h.message?s="function"==typeof h.message?h.message(e,t):h.message.replace("%charsTyped%",a).replace("%charsRemaining%",t-a).replace("%charsTotal%",t):(h.preText&&(s+=h.preText),h.showCharsTyped?s+=a:s+=t-a,h.showMaxLength&&(s+=h.separator+t),h.postText&&(s+=h.postText)),s}function g(e,t,a,s){var n,o,i;s&&(s.html(m(t.val(),a,a-e)),0<e?(n=t,o=h.threshold,a=a,i=!0,(i=!(!h.alwaysShow&&a-r(n)>o)&&i)?l(t,s.removeClass(h.limitReachedClass+" "+h.limitExceededClass).addClass(h.warningClass)):(a=t,n=s,h.alwaysShow||(n.css({display:"none"}),a.trigger("maxlength.hidden")))):h.limitExceededClass?l(t,0===e?s.removeClass(h.warningClass+" "+h.limitExceededClass).addClass(h.limitReachedClass):s.removeClass(h.warningClass+" "+h.limitReachedClass).addClass(h.limitExceededClass)):l(t,s.removeClass(h.warningClass).addClass(h.limitReachedClass))),h.customMaxAttribute&&(e<0?t.addClass(h.customMaxClass):t.removeClass(h.customMaxClass))}function a(e,t){s=(n=e)[0];var a=v.extend({},"function"==typeof s.getBoundingClientRect?s.getBoundingClientRect():{width:s.offsetWidth,height:s.offsetHeight},n.offset());if("function"===v.type(h.placement))h.placement(e,t,a);else{if(v.isPlainObject(h.placement))return s=h.placement,n=t,void(s&&n&&(o={},v.each(["top","bottom","left","right","position"],function(e,t){var a=h.placement[t];void 0!==a&&(o[t]=a)}),n.css(o)));var s,n,o,i=e.outerWidth(),r=t.outerWidth(),l=t.width(),c=t.height();switch(h.appendToParent&&(a.top-=e.parent().offset().top,a.left-=e.parent().offset().left),h.placement){case"bottom":t.css({top:a.top+a.height,left:a.left+a.width/2-l/2});break;case"top":t.css({top:a.top-c,left:a.left+a.width/2-l/2});break;case"left":t.css({top:a.top+a.height/2-c/2,left:a.left-l});break;case"right":t.css({top:a.top+a.height/2-c/2,left:a.left+a.width});break;case"bottom-right":t.css({top:a.top+a.height,left:a.left+a.width});break;case"top-right":t.css({top:a.top-c,left:a.left+i});break;case"top-left":t.css({top:a.top-c,left:a.left-r});break;case"bottom-left":t.css({top:a.top+e.outerHeight(),left:a.left-r});break;case"centered-right":t.css({top:a.top+c/2,left:a.left+i-r-3});break;case"bottom-right-inside":t.css({top:a.top+a.height,left:a.left+a.width-r});break;case"top-right-inside":t.css({top:a.top-c,left:a.left+i-r});break;case"top-left-inside":t.css({top:a.top-c,left:a.left});break;case"bottom-left-inside":t.css({top:a.top+e.outerHeight(),left:a.left})}}}function x(e){var t,a=e.attr("maxlength")||h.customMaxAttribute;return h.customMaxAttribute&&!h.allowOverMax&&(t=e.attr(h.customMaxAttribute),(!a||t<a)&&(a=t)),a=a||e.attr("size")}return v.isFunction(h)&&!e&&(e=h,h={}),h=v.extend({showOnReady:!1,alwaysShow:!0,threshold:0,warningClass:"small form-text text-muted",limitReachedClass:"small form-text text-danger",limitExceededClass:"",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom-right-inside",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,customMaxClass:"overmax",allowOverMax:!1,zIndex:1099},h),this.each(function(){var l,c,p=v(this);function e(){var e=m(p.val(),l,"0");l=x(p),c=c||v('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:h.zIndex}).html(e),p.is("textarea")&&(p.data("maxlenghtsizex",p.outerWidth()),p.data("maxlenghtsizey",p.outerHeight()),p.mouseup(function(){p.outerWidth()===p.data("maxlenghtsizex")&&p.outerHeight()===p.data("maxlenghtsizey")||a(p,c),p.data("maxlenghtsizex",p.outerWidth()),p.data("maxlenghtsizey",p.outerHeight())})),h.appendToParent?(p.parent().append(c),p.parent().css("position","relative")):t.append(c),g(u(p,x(p)),p,l,c),a(p,c)}v(window).resize(function(){c&&a(p,c)}),h.showOnReady?p.ready(function(){e()}):p.focus(function(){e()}),p.on("maxlength.reposition",function(){a(p,c)}),p.on("destroyed",function(){c&&c.remove()}),p.on("blur",function(){c&&!h.showOnReady&&c.remove()}),p.on("input",function(){var e=x(p),t=u(p,e),a=!0;if(h.validate&&t<0){var s=p,n=s.val();if(h.twoCharLinebreak&&"\n"===(n=n.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"))[n.length-1]&&(e-=n.length%2),h.utf8){for(var o=n.split("").map(d),i=0,r=f(n)-e;i<r;i+=o.pop());e-=e-o.length}s.val(n.substr(0,e)),a=!1}else g(t,p,l,c);return a})})}})}(jQuery);